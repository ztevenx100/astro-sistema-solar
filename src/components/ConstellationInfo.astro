---
// Constellation information tooltip component
interface Props {
  constellationId: string;
  name: string;
  planet: string;
  visible?: boolean;
}

const { constellationId, name, planet, visible = false } = Astro.props;

// Informaci√≥n adicional sobre cada constelaci√≥n
const constellationInfo = {
  'ursa-major': {
    mythology: 'La Osa Mayor representa a Calisto en la mitolog√≠a griega',
    facts: [
      'Forma parte de la constelaci√≥n Ursa Major',
      'Es visible todo el a√±o en el hemisferio norte',
      'Sus 7 estrellas principales forman "El Carro"',
      'Apunta hacia la Estrella Polar'
    ],
    distance: '79-124 a√±os luz de la Tierra',
    brightest: 'Alioth (Œµ Ursae Majoris)'
  },
  'orion': {
    mythology: 'Ori√≥n era un gran cazador en la mitolog√≠a griega',
    facts: [
      'Contiene la famosa Nebulosa de Ori√≥n',
      'Betelgeuse es una supergigante roja',
      'Visible en invierno desde el hemisferio norte',
      'Las tres estrellas del cintur√≥n son √∫nicas'
    ],
    distance: '240-2000 a√±os luz de la Tierra',
    brightest: 'Rigel (Œ≤ Orionis)'
  },
  'cassiopeia': {
    mythology: 'Casiopea era una reina vanidosa en la mitolog√≠a griega',
    facts: [
      'Tiene forma caracter√≠stica de "W"',
      'Es circumpolar en latitudes altas del norte',
      'Contiene varios c√∫mulos estelares',
      'Su estrella central es variable'
    ],
    distance: '54-550 a√±os luz de la Tierra',
    brightest: 'Schedar (Œ± Cassiopeiae)'
  },
  'leo': {
    mythology: 'Representa al Le√≥n de Nemea derrotado por H√©rcules',
    facts: [
      'Contiene la estrella Regulus en el coraz√≥n',
      'Es una constelaci√≥n zodiacal',
      'Mejor visible en primavera',
      'Contiene varias galaxias brillantes'
    ],
    distance: '36-247 a√±os luz de la Tierra',
    brightest: 'Regulus (Œ± Leonis)'
  },
  'aquarius': {
    mythology: 'El portador de agua de los dioses',
    facts: [
      'Es una constelaci√≥n zodiacal',
      'Contiene la estrella m√°s cercana, Gliese 876',
      'Asociada con lluvia y agua en muchas culturas',
      'Visible mejor en oto√±o'
    ],
    distance: '25-520 a√±os luz de la Tierra',
    brightest: 'Sadalsuud (Œ≤ Aquarii)'
  },
  'gemini': {
    mythology: 'Los gemelos C√°stor y P√≥lux de la mitolog√≠a griega',
    facts: [
      'Contiene el c√∫mulo abierto M35',
      'Es una constelaci√≥n zodiacal',
      'Las dos estrellas principales son muy diferentes',
      'Visible en invierno y primavera'
    ],
    distance: '34-520 a√±os luz de la Tierra',
    brightest: 'Pollux (Œ≤ Geminorum)'
  },
  'scorpius': {
    mythology: 'El escorpi√≥n que mat√≥ a Ori√≥n en la mitolog√≠a',
    facts: [
      'Contiene la supergigante roja Antares',
      'Es una constelaci√≥n zodiacal',
      'Rica en c√∫mulos estelares brillantes',
      'Mejor visible en verano'
    ],
    distance: '65-700 a√±os luz de la Tierra',
    brightest: 'Antares (Œ± Scorpii)'
  },
  'cygnus': {
    mythology: 'Representa un cisne volando por la V√≠a L√°ctea',
    facts: [
      'Contiene la Cruz del Norte',
      'Deneb es una de las estrellas m√°s luminosas',
      'Rica regi√≥n de la V√≠a L√°ctea',
      'Visible en verano y oto√±o'
    ],
    distance: '45-2600 a√±os luz de la Tierra',
    brightest: 'Deneb (Œ± Cygni)'
  }
};

const info = constellationInfo[constellationId as keyof typeof constellationInfo];
---

<div 
  class={`constellation-info-panel ${visible ? 'visible' : ''}`}
  id={`info-${constellationId}`}
>
  <div class="info-content glass-effect rounded-xl p-6 max-w-sm">
    <!-- Header -->
    <div class="info-header mb-4">
      <h3 class="font-space text-lg font-bold text-star mb-1">{name}</h3>
      <p class="text-sm text-blue-300">‚Üí Navegar a {planet}</p>
    </div>

    <!-- Mythology -->
    <div class="mythology-section mb-4">
      <h4 class="text-sm font-semibold text-purple-300 mb-2">üèõÔ∏è Mitolog√≠a</h4>
      <p class="text-xs text-gray-300 leading-relaxed">{info?.mythology}</p>
    </div>

    <!-- Facts -->
    <div class="facts-section mb-4">
      <h4 class="text-sm font-semibold text-green-300 mb-2">‚≠ê Datos Curiosos</h4>
      <ul class="text-xs text-gray-300 space-y-1">
        {info?.facts.map((fact) => (
          <li class="flex items-start">
            <span class="text-yellow-400 mr-2">‚Ä¢</span>
            <span>{fact}</span>
          </li>
        ))}
      </ul>
    </div>

    <!-- Technical Info -->
    <div class="technical-section">
      <div class="grid grid-cols-1 gap-2 text-xs">
        <div class="tech-item">
          <span class="text-cyan-400 font-medium">üìè Distancia:</span>
          <span class="text-gray-300 ml-2">{info?.distance}</span>
        </div>
        <div class="tech-item">
          <span class="text-orange-400 font-medium">üåü Estrella principal:</span>
          <span class="text-gray-300 ml-2">{info?.brightest}</span>
        </div>
      </div>
    </div>

    <!-- Navigation hint -->
    <div class="navigation-hint mt-4 pt-3 border-t border-gray-600">
      <p class="text-xs text-gray-400 text-center">
        üñ±Ô∏è Click para navegar a <span class="text-yellow-300 font-medium">{planet}</span>
      </p>
    </div>
  </div>
</div>

<style>
  .constellation-info-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  .constellation-info-panel.visible {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  .info-content {
    background: rgba(0, 0, 20, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(135, 206, 235, 0.3);
    box-shadow: 
      0 0 30px rgba(135, 206, 235, 0.2),
      inset 0 0 20px rgba(255, 255, 255, 0.05);
    max-height: 80vh;
    overflow-y: auto;
  }

  .info-header {
    border-bottom: 1px solid rgba(135, 206, 235, 0.2);
    padding-bottom: 0.5rem;
  }

  .tech-item {
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  }

  /* Scrollbar for overflow content */
  .info-content::-webkit-scrollbar {
    width: 4px;
  }

  .info-content::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 2px;
  }

  .info-content::-webkit-scrollbar-thumb {
    background: rgba(135, 206, 235, 0.4);
    border-radius: 2px;
  }

  .info-content::-webkit-scrollbar-thumb:hover {
    background: rgba(135, 206, 235, 0.6);
  }

  /* Animation effects */
  .mythology-section, .facts-section, .technical-section {
    animation: fadeInUp 0.5s ease-out forwards;
    opacity: 0;
    transform: translateY(10px);
  }

  .mythology-section {
    animation-delay: 0.1s;
  }

  .facts-section {
    animation-delay: 0.2s;
  }

  .technical-section {
    animation-delay: 0.3s;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .info-content {
      max-width: 90vw;
      padding: 1rem;
    }
    
    .constellation-info-panel {
      top: 40%;
    }
  }
</style>
